(()=>{"use strict";class e{static ApiFuncs={Header:{BuildMenu:async()=>{let e=await this.HtmlFuns.Templates.Header.BuildMenu();document.getElementById("KHeader").innerHTML=e,document.getElementById("KCont1").innerHTML=""},MenuItemClick:{Booking:async()=>{KSGlobalClientSideFuncsClass.Booking.ApiFuncs.Header.ShowinDOM(),KSGlobalClientSideFuncsClass.Booking.ApiFuncs.Insert()}}}};static HtmlFuns={Templates:{Header:{BuildMenu:async()=>{let e=await fetch("Templates/Header.html"),t=await e.text();return await t}},Show:async()=>{let e=await fetch("Templates/Booking/Show.html"),t=await e.text();document.getElementById("KCont1").innerHTML=t},Insert:async()=>{let e=await fetch("Templates/Booking/Insert.html"),t=await e.text();return await t}},Hbs:{Row:async()=>{let e=await fetch("Hbs/Booking/Row.html"),t=await e.text();return await t},QrCode:async()=>{let e=await fetch("Hbs/Booking/QrCode.html"),t=await e.text();return await t},ShowAll:async()=>{let e=await fetch("Hbs/Booking/ShowAll.html"),t=await e.text();return await t},ShowDataForDelete:async()=>{let e=await fetch("Hbs/Booking/Delete.html"),t=await e.text();return await t}}}}class t{static JSFuncs={Insert:async()=>{let e=document.getElementById("FormVertical");if(e.classList.remove("was-validated"),e.classList.add("novalidate"),e.checkValidity()){let t=await DalFuncsClass.Booking.InsertFunc({inObjectToInsert:serializeObject(e)});if(t.KTF){let e=document.getElementById("AlertSuccessId"),a=document.getElementById("AlertSuccessMessageId");e.style.display="",a.innerHTML=`<strong>Hurray!</strong> ${t.KResult}`,setTimeout((function(){e.style.display="none"}),7e3)}else{let e=document.getElementById("AlertWarningId"),a=document.getElementById("AlertWarningMessageId");e.style.display="",a.innerHTML=`<strong>Sorry!</strong> ${t.KReason}`,setTimeout((function(){e.style.display="none"}),7e3)}}else document.forms[1].classList.add("was-validated")},Show:async()=>{let e={KTF:!1,KResult:"",JsonData:{}},t=await DalFuncsClass.Booking.ShowTodayFunc(),a=1;return Object.entries(t.JsonData).forEach((([t,n])=>{e.JsonData[t]=n,e.JsonData[t].SNo=a,a+=1})),e.KTF=!0,await e},ShowDataForDelete:async()=>{let e={KTF:!1,KResult:"",JsonData:{}},t=await DalFuncsClass.Booking.ShowDataForDelete(),a=1;return Object.entries(t.JsonData).forEach((([t,n])=>{e.JsonData[t]=n,e.JsonData[t].SNo=a,a+=1})),e.KTF=!0,await e}};static ApiFuncs={Insert:async e=>{if(void 0===e==0){let t=e.currentTarget;this.CommonFuncs.Ui.Html.DOM.Header.ChangeClass({inHtmlControl:t})}let t=await this.HtmlFuns.Templates.Insert();document.getElementById("KCont1").innerHTML=t},QrCode:{ToModal:async({inRowPK:e})=>{let t=await DalBookingFuncsClass.PickFunc({inRowPK:e});if(console.log("jVarLocalDataNeeded : ",t),t.KTF){let a=document.getElementById("ModalCustomerName"),n=document.getElementById("ModalPK"),l=document.getElementById("ModalGarments"),s=document.getElementById("ModalWeight"),o=document.getElementById("ModalMobile");a.innerHTML=t.KResult.CustomerName,n.innerHTML=e,l.innerHTML=t.KResult.Garments,s.innerHTML=`${t.KResult.Weight} Kg.`,o.innerHTML=t.KResult.Mobile;let i=`${e}/${t.KResult.CustomerName}/${t.KResult.Mobile}/${t.KResult.Garments}/${t.KResult.Weight}`;this.CommonFuncs.QrCode.GenerateQrCodeOnCanvas({inQrData:i});let r="ModalForQrCode";new bootstrap.Modal(document.getElementById(r),{keyboard:!0,focus:!0}).show()}}},ShowDataForDelete:async e=>{if(void 0===e==0){let t=e.currentTarget;this.CommonFuncs.Ui.Html.DOM.Header.ChangeClass({inHtmlControl:t})}let t=await this.Booking.HtmlFuns.Hbs.ShowDataForDelete();var a=Handlebars.compile(t);let n=await this.Booking.JSFuncs.Show();n.KTF;let l=a(n.JsonData);document.getElementById("KCont1").innerHTML=l},ShowAll:async e=>{if(void 0===e==0){let t=e.currentTarget;this.CommonFuncs.Ui.Html.DOM.Header.ChangeClass({inHtmlControl:t})}let t=await this.Booking.HtmlFuns.Hbs.ShowAll();var a=Handlebars.compile(t);let n=await this.Booking.JSFuncs.Show();n.KTF;let l=a(n.JsonData);document.getElementById("KCont1").innerHTML=l},Show:async e=>{if(void 0===e==0){let t=e.currentTarget;this.CommonFuncs.Ui.Html.DOM.Header.ChangeClass({inHtmlControl:t})}await this.Booking.HtmlFuns.Templates.Show();let t=await this.Booking.JSFuncs.Show(),a=await this.Booking.HtmlFuns.Hbs.Row();t.KTF;let n=Handlebars.compile(a)(t.JsonData);document.getElementById("KTableBody").innerHTML=n},Header:{ShowinDOM:async()=>{let t=await this.HtmlFuns.Templates.Header.PullFunc();document.getElementById("KHeader").innerHTML=t;let a=document.getElementById("HomeId");console.log("jVarLocalHomeId : ",a),a.addEventListener("click",(async()=>{await e.ApiFuncs.Header.BuildMenu()}))},MenuItemClick:{HomeClick:async()=>{let e=await this.HtmlFuns.Templates.Header.MenuItemClick.HomeClick();document.getElementById("KHeader").innerHTML=e,document.getElementById("KCont1").innerHTML=""}}}};static HtmlFuns={Templates:{Header:{MenuItemClick:{HomeClick:async()=>{let e=await fetch("Templates/Header.html"),t=await e.text();return await t}},PullFunc:async()=>{let e=await fetch("Templates/Booking/Header.html"),t=await e.text();return await t}},Show:async()=>{let e=await fetch("Templates/Booking/Show.html"),t=await e.text();document.getElementById("KCont1").innerHTML=t},Insert:async()=>{let e=await fetch("Templates/Booking/Insert.html"),t=await e.text();return await t}},Hbs:{Row:async()=>{let e=await fetch("Hbs/Booking/Row.html"),t=await e.text();return await t},QrCode:async()=>{let e=await fetch("Hbs/Booking/QrCode.html"),t=await e.text();return await t},ShowAll:async()=>{let e=await fetch("Hbs/Booking/ShowAll.html"),t=await e.text();return await t},ShowDataForDelete:async()=>{let e=await fetch("Hbs/Booking/Delete.html"),t=await e.text();return await t}}};static CommonFuncs={QrCode:{GenerateQrCodeOnCanvas:({inQrData:e=""})=>{var t=document.getElementById("canvas");t.height=1,t.width=1,t.style.visibility="hidden";let a={};a.text=e,a.bcid="qrcode",a.scaleX=1,a.scaleY=1,a.rotate="N";try{new Date,bwipjs.toCanvas(t,a),new Date,t.style.visibility="visible"}catch(e){return void console.log("error : ",e)}}},Ui:{Html:{DOM:{Header:{ChangeClass:({inHtmlControl:e})=>{let t=e.closest("ul").querySelectorAll("a"),a="text-info",n="text-white";t.forEach((e=>{e.classList.contains(a)&&(e.classList.remove(a),e.classList.add(n))})),e.classList.remove(n),e.classList.add(a)}}}}}}}(async()=>{await t.ApiFuncs.Header.ShowinDOM(),await t.ApiFuncs.Insert()})().then((e=>{}))})();